import{a as e,j as t}from"./index-bdd35117.js";import{r as i}from"./vendor-114faf07.js";import{c as a,L as o}from"./router-1eef6c24.js";import{m as r}from"./animations-38072708.js";import{E as n}from"./icons-2d1db975.js";const s=()=>{const{id:s}=a(),[c,l]=i.useState(null),[d,m]=i.useState([]),[p,h]=i.useState(!0),[u,v]=i.useState(!1),f=i.useRef(null);i.useEffect(()=>{s&&(g(),b())},[s]);const g=async()=>{try{const e="b7cd3340a794e5a2f35e3abb820b497f",t=await fetch(`https://api.themoviedb.org/3/movie/${s}?api_key=${e}`),i=await t.json();l(i)}catch(e){}finally{h(!1)}},b=async()=>{var e;try{const t="b7cd3340a794e5a2f35e3abb820b497f",i=await fetch(`https://api.themoviedb.org/3/movie/${s}/similar?api_key=${t}`),a=await i.json();m((null==(e=a.results)?void 0:e.slice(0,6))||[])}catch(t){}};if(p)return e("div",{className:"loading",children:"Loading movie..."});if(!c)return t("div",{className:"error",children:[e("h3",{children:"Movie Not Found"}),e("p",{children:"The requested movie could not be found."})]});const y=c.backdrop_path?`https://image.tmdb.org/t/p/w1920_and_h800_multi_faces${c.backdrop_path}`:null;return e("div",{className:"content-section",style:{paddingTop:"120px"},children:t("div",{className:"container",children:[t(r.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},children:[e("div",{className:"video-container",children:t("video",{ref:f,className:"video-player",poster:y,controls:!0,controlsList:"nodownload",onTimeUpdate:()=>{f.current&&f.current.currentTime>=5&&!u&&(f.current.pause(),v(!0))},children:[e("source",{src:"https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4",type:"video/mp4"}),"Your browser does not support the video tag."]})}),u&&e(r.div,{className:"cpa-offer-overlay",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.9)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:t("div",{style:{background:"rgba(255, 255, 255, 0.1)",padding:"3rem",borderRadius:"12px",textAlign:"center",maxWidth:"500px",backdropFilter:"blur(10px)"},children:[e("h2",{style:{marginBottom:"1rem",color:"#e50914"},children:"Continue Watching"}),e("p",{style:{marginBottom:"2rem",color:"#b3b3b3"},children:"To continue watching this movie, please complete a quick offer below."}),e("button",{onClick:()=>{alert("Thank you for completing the offer! You can now continue watching."),v(!1),f.current&&f.current.play()},className:"btn-primary",style:{padding:"1rem 2rem",fontSize:"1.1rem"},children:"Complete Offer & Continue"})]})})]}),d.length>0&&t("section",{className:"mt-4",children:[e("h2",{className:"section-title",children:"Related Movies"}),e("div",{className:"movie-grid",children:d.map(i=>t(r.div,{className:"movie-card",whileHover:{y:-8,scale:1.02},transition:{duration:.3},children:[e("div",{className:"movie-poster",children:e("img",{src:`https://image.tmdb.org/t/p/w220_and_h330_face${i.poster_path}`,alt:i.title,loading:"lazy"})}),t("div",{className:"movie-info",children:[e("h3",{className:"movie-title",children:i.title.length>20?i.title.substring(0,20)+"...":i.title}),t(o,{to:`/movie/${i.id}`,className:"btn btn-primary",children:[e(n,{size:16})," View"]})]})]},i.id))})]})]})})};export{s as default};
